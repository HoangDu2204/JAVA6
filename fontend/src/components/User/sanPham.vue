<template>

    <div class="lien-he">

        <main>
            <div>
                <section class="bread-crumb"
                    style="background: linear-gradient(0deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.3)), url(//bizweb.dktcdn.net/100/492/035/themes/919334/assets/breadcrumb.jpg?1735117293436) center no-repeat;">
                    <div class="container">
                        <div class="title-bread-crumb" style="text-align: center; padding: 0; margin-bottom: 10px;">
                            Sản phẩm
                        </div>
                        <div class="breadcrumb-container" style="display: flex; justify-content: center; align-items: center;">
                            <ul class="breadcrumb" style="display: flex; align-items: center; margin: 0; padding: 0; background: none; list-style: none;">
                                <li class="breadcrumb-item" style="margin: 0;">
                                    <a href="/" style="color: #fff; text-decoration: none; font-weight: 500;">Trang chủ</a>
                                </li>
                                <li class="breadcrumb-separator" style="margin: 0 10px; color: #fff; font-weight: bold;">></li>
                                <li class="breadcrumb-item active" style="margin: 0;">
                                    <span style="color: #cd9b32; font-weight: 600;">Sản phẩm</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <div class="container-fluid my-5" style="margin-left: 10px;">

            <section class="section2">
                <div class="container-fluid">

                    <h1 style="text-align:center ;">Tất cả sản phẩm</h1>
                    <img src="https://bizweb.dktcdn.net/100/492/035/themes/919334/assets/title.png?1735117293436" alt=""
                        style="padding-left: 720px; padding-bottom: 30px; ">

                    <div class="row">
                        <div class="dqdt-sidebar sidebar col-lg-3 col-12">
                            <div class="aside-content aside-content-menu">
                                <div class="title-head-col">
                                    Danh mục sản phẩm
                                </div>
                                <nav class="nav-category">
                                    <ul class=" navbar-pills">
                                        <li class="nav-item  relative">
                                            <a title="Bánh kem" href="/banh-kem" class="nav-link pr-5">Bánh kem</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh sinh nhật" class="nav-link"
                                                        href="/banh-sinh-nhat">Bánh sinh nhật</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh sự kiện" class="nav-link" href="/banh-su-kien">Bánh
                                                        sự kiện</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh cho trẻ em" class="nav-link"
                                                        href="/banh-cho-tre-em">Bánh cho trẻ em</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh kem đặt trước" class="nav-link"
                                                        href="/banh-kem-dat-truoc">Bánh kem đặt trước</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh mì" href="/banh-mi" class="nav-link pr-5">Bánh mì</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh mì kẹp" class="nav-link" href="/banh-mi-kep">Bánh mì
                                                        kẹp</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh cán lớp" class="nav-link" href="/banh-can-lop">Bánh
                                                        cán lớp</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mì gối" class="nav-link" href="/banh-mi-goi">Bánh mì
                                                        gối</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mì baguette" class="nav-link"
                                                        href="/banh-mi-baguette">Bánh mì baguette</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mì mặn" class="nav-link" href="/banh-mi-man">Bánh mì
                                                        mặn</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mì ngọt" class="nav-link" href="/banh-mi-ngot">Bánh
                                                        mì ngọt</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh ngọt" href="/banh-ngot" class="nav-link pr-5">Bánh ngọt</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh bông lan" class="nav-link" href="/banh-bong-lan">Bánh
                                                        bông lan</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh Chiffon" class="nav-link" href="/banh-chiffon">Bánh
                                                        Chiffon</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh cuộn" class="nav-link" href="/banh-cuon">Bánh
                                                        cuộn</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh su kem" class="nav-link" href="/banh-su-kem">Bánh su
                                                        kem</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh tráng miệng" href="/banh-trang-mieng"
                                                class="nav-link pr-5">Bánh tráng miệng</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh miếng" class="nav-link" href="/banh-mieng">Bánh
                                                        miếng</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mousse" class="nav-link" href="/banh-mousse">Bánh
                                                        mousse</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Tiramisu/ Caramel/ Sữa chua" class="nav-link"
                                                        href="/tiramisu-caramel-sua-chua">Tiramisu/ Caramel/ Sữa
                                                        chua</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Panna cotta &amp; Pudding" class="nav-link"
                                                        href="/panna-cotta-pudding">Panna cotta &amp; Pudding</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh khô" href="/banh-kho" class="nav-link pr-5">Bánh khô</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh quy" class="nav-link" href="/banh-quy">Bánh quy</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh mì nướng" class="nav-link" href="/banh-mi-nuong">Bánh
                                                        mì nướng</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh sừng bò mini" class="nav-link"
                                                        href="/banh-sung-bo-mini">Bánh sừng bò mini</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh đông lạnh" href="/banh-dong-lanh" class="nav-link pr-5">Bánh
                                                đông lạnh</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh bao" class="nav-link" href="/banh-bao">Bánh bao</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh pizza" class="nav-link" href="/banh-pizza">Bánh
                                                        pizza</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Bánh theo mùa" href="/banh-theo-mua" class="nav-link pr-5">Bánh
                                                theo mùa</a>
                                            <i class="open_mnu down_icon"></i>
                                            <ul class="menu_down" style="display:none;">
                                                <li class="nav-item">
                                                    <a title="Bánh quy Tết" class="nav-link" href="/banh-quy-tet">Bánh
                                                        quy Tết</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh Trung thu" class="nav-link"
                                                        href="/banh-trung-thu">Bánh Trung thu</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh Quy Noel" class="nav-link" href="/banh-quy-noel">Bánh
                                                        Quy Noel</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a title="Bánh Kem Noel" class="nav-link" href="/banh-kem-noel">Bánh
                                                        Kem Noel</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li class="nav-item  relative">
                                            <a title="Đồ uống" class="nav-link" href="/do-uong">Đồ uống</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>

                            <!-- lọc sản phẩm -->
                            <div class="filter-content">
                                <div class="title-head-col">
                                    Bộ lọc sản phẩm
                                    <span>Giúp bạn tìm sản phẩm nhanh hơn</span>
                                </div>
                                <div class="filter-container">
                                    <div class="col_title">
                                                                        <div class="filter-container__selected-filter" v-if="hasActiveFilters">
                                    <div class="filter-container__selected-filter-header clearfix">
                                        <span class="filter-container__selected-filter-header-title">
                                            Bạn chọn ({{ filteredProducts.length }} sản phẩm)
                                        </span>
                                    </div>
                                    <div class="filter-container__selected-filter-list">
                                        <a href="javascript:void(0)" @click="clearAllFilters"
                                            class="filter-container__clear-all">Bỏ hết <svg
                                                xmlns="http://www.w3.org/2000/svg"
                                                xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                                                width="10" height="10" x="0" y="0" viewBox="0 0 365.696 365.696"
                                                style="enable-background:new 0 0 512 512" xml:space="preserve"
                                                class="">
                                                <g>
                                                    <path xmlns="http://www.w3.org/2000/svg"
                                                        d="m243.1875 182.859375 113.132812-113.132813c12.5-12.5 12.5-32.765624 0-45.246093l-15.082031-15.082031c-12.503906-12.503907-32.769531-12.503907-45.25 0l-113.128906 113.128906-113.132813-113.152344c-12.5-12.5-32.765624-12.5-45.246093 0l-15.105469 15.082031c-12.5 12.503907-12.5 32.769531 0 45.25l113.152344 113.152344-113.128906 113.128906c-12.503907 12.503907-12.503907 32.769531 0 45.25l15.082031 15.082031c12.5 12.5 32.765625 12.5 45.246093 0l113.132813-113.132812 113.128906 113.132812c12.503907 12.5 32.769531 12.5 45.25 0l15.082031-15.082031c12.5-12.503906 12.5-32.769531 0-45.25zm0 0"
                                                        fill="#ffffff" data-original="#fff" class=""></path>
                                                </g>
                                            </svg></a>
                                        <ul>
                                            <li v-for="rangeId in selectedPriceRanges" :key="'price-' + rangeId">
                                                {{ priceRanges.find(r => r.id === rangeId)?.label }}
                                            </li>
                                            <li v-for="typeId in selectedProductTypes" :key="'type-' + typeId">
                                                {{ productTypes.find(t => t.id === typeId)?.label }}
                                            </li>
                                            <li v-for="weightId in selectedWeights" :key="'weight-' + weightId">
                                                {{ weights.find(w => w.id === weightId)?.label }}
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                    </div>


                                    <aside class="aside-item filter-price">

                                        <div class="title-head">
                                            Chọn mức giá

                                        </div>
                                        <div class="aside-content filter-group content_price">
                                            <ul>





                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="10-000d" for="filter-duoi-10-000d">
                                                            <input type="checkbox" id="filter-duoi-10-000d"
                                                                @change="handlePriceFilter('duoi-10-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Dưới 10.000đ
                                                        </label>
                                                    </span>
                                                </li>







                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="50-000d" for="filter-10-000d-50-000d">
                                                            <input type="checkbox" id="filter-10-000d-50-000d"
                                                                @change="handlePriceFilter('10-000d-50-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 10.000đ - 50.000đ
                                                        </label>
                                                    </span>
                                                </li>






                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="100-000d" for="filter-50-000d-100-000d">
                                                            <input type="checkbox" id="filter-50-000d-100-000d"
                                                                @change="handlePriceFilter('50-000d-100-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 50.000đ - 100.000đ
                                                        </label>
                                                    </span>
                                                </li>






                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="200-000d" for="filter-100-000d-200-000d">
                                                            <input type="checkbox" id="filter-100-000d-200-000d"
                                                                @change="handlePriceFilter('100-000d-200-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 100.000đ - 200.000đ
                                                        </label>
                                                    </span>
                                                </li>






                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="300-000d" for="filter-200-000d-300-000d">
                                                            <input type="checkbox" id="filter-200-000d-300-000d"
                                                                @change="handlePriceFilter('200-000d-300-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 200.000đ - 300.000đ
                                                        </label>
                                                    </span>
                                                </li>






                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="500-000d" for="filter-300-000d-500-000d">
                                                            <input type="checkbox" id="filter-300-000d-500-000d"
                                                                @change="handlePriceFilter('300-000d-500-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 300.000đ - 500.000đ
                                                        </label>
                                                    </span>
                                                </li>






                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="1-000-000d"
                                                            for="filter-500-000d-1-000-000d">
                                                            <input type="checkbox" id="filter-500-000d-1-000-000d"
                                                                @change="handlePriceFilter('500-000d-1-000-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Từ 500.000đ - 1 triệu
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label data-filter="1-000-000d" for="filter-tren1-000-000d">
                                                            <input type="checkbox" id="filter-tren1-000-000d"
                                                                @change="handlePriceFilter('tren1-000-000d', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Trên 1 triệu
                                                        </label>
                                                    </span>
                                                </li>



                                            </ul>
                                        </div>
                                    </aside>


                                    <!-- <aside class="aside-item aside-itemxx filter-type">
                                        <div class="aside-title">
                                            <h2 class="title-filter title-head margin-top-0"><span>Loại</span></h2>
                                        </div>
                                        <div class="aside-content filter-group">
                                            <ul>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-kem">
                                                            <input type="checkbox" id="filter-banh-kem"
                                                                @change="handleProductTypeFilter('banh-kem', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh kem
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-kho">
                                                            <input type="checkbox" id="filter-banh-kho"
                                                                @change="handleProductTypeFilter('banh-kho', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh khô
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-mi">
                                                            <input type="checkbox" id="filter-banh-mi"
                                                                @change="handleProductTypeFilter('banh-mi', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh mì
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-mieng">
                                                            <input type="checkbox" id="filter-banh-mieng"
                                                                @change="handleProductTypeFilter('banh-mieng', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh miếng
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-mousse">
                                                            <input type="checkbox" id="filter-banh-mousse"
                                                                @change="handleProductTypeFilter('banh-mousse', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh mousse
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-ngot">
                                                            <input type="checkbox" id="filter-banh-ngot"
                                                                @change="handleProductTypeFilter('banh-ngot', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh ngọt
                                                        </label>
                                                    </span>
                                                </li>
                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-banh-trang-mieng">
                                                            <input type="checkbox" id="filter-banh-trang-mieng"
                                                                @change="handleProductTypeFilter('banh-trang-mieng', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            Bánh tráng miệng
                                                        </label>
                                                    </span>
                                                </li>
                                            </ul>
                                        </div>
                                    </aside> -->


                                    <aside class="aside-item filter-tag">

                                        <div class="title-head">
                                            Trọng lượng

                                        </div>
                                        <div class="aside-content filter-group">
                                            <ul>




                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-90g">
                                                            <input type="checkbox" id="filter-90g"
                                                                @change="handleWeightFilter('90g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            90g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-100g">
                                                            <input type="checkbox" id="filter-100g"
                                                                @change="handleWeightFilter('100g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            100g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-107g">
                                                            <input type="checkbox" id="filter-107g"
                                                                @change="handleWeightFilter('107g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            107g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-120g">
                                                            <input type="checkbox" id="filter-120g" data-group="tag2"
                                                                data-field="tags" data-text="120g" value="(120g)"
                                                                data-operator="OR" @change="handleWeightFilter('120g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            120g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-200g">
                                                            <input type="checkbox" id="filter-200g" data-group="tag2"
                                                                data-field="tags" data-text="200g" value="(200g)"
                                                                data-operator="OR" @change="handleWeightFilter('200g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            200g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-220g">
                                                            <input type="checkbox" id="filter-220g" data-group="tag2"
                                                                data-field="tags" data-text="220g" value="(220g)"
                                                                data-operator="OR" @change="handleWeightFilter('220g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            220g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-250g">
                                                            <input type="checkbox" id="filter-250g" data-group="tag2"
                                                                data-field="tags" data-text="250g" value="(250g)"
                                                                data-operator="OR" @change="handleWeightFilter('250g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            250g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-400g">
                                                            <input type="checkbox" id="filter-400g" data-group="tag2"
                                                                data-field="tags" data-text="400g" value="(400g)"
                                                                data-operator="OR" @change="handleWeightFilter('400g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            400g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-500g">
                                                            <input type="checkbox" id="filter-500g" data-group="tag2"
                                                                data-field="tags" data-text="500g" value="(500g)"
                                                                data-operator="OR" @change="handleWeightFilter('500g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            500g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-700g">
                                                            <input type="checkbox" id="filter-700g" data-group="tag2"
                                                                data-field="tags" data-text="700g" value="(700g)"
                                                                data-operator="OR" @change="handleWeightFilter('700g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            700g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-900g">
                                                            <input type="checkbox" id="filter-900g" data-group="tag2"
                                                                data-field="tags" data-text="900g" value="(900g)"
                                                                data-operator="OR" @change="handleWeightFilter('900g', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            900g
                                                        </label>
                                                    </span>
                                                </li>



                                                <li class="filter-item filter-item--check-box filter-item--green">
                                                    <span>
                                                        <label for="filter-1-4kg">
                                                            <input type="checkbox" id="filter-1-4kg" data-group="tag2"
                                                                data-field="tags" data-text="1.4kg" value="(1.4kg)"
                                                                data-operator="OR" @change="handleWeightFilter('1-4kg', $event.target.checked)">
                                                            <i class="fa"></i>
                                                            1.4kg
                                                        </label>
                                                    </span>
                                                </li>

                                            </ul>
                                        </div>
                                    </aside>


                                    <div class="border_filter">

                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="block-collection col-lg-9 col-12">

                            <div class="category-products">

                                <div class="sort-cate clearfix margin-bottom-10 hidden-xs" style="padding-left: 57px;">
                                    <div class="sort-cate-left hidden-xs">


                                        <ul>
                                            <li class="btn-quick-sort alpha-asc" style="margin-left: 5px;">
                                                <a href="#" @click.prevent="setSort('alpha-asc')"
                                                    :class="{ active: currentSort === 'alpha-asc' }"
                                                    title="Tên A-Z"><i></i>Tên A-Z</a>
                                            </li>
                                            <li class="btn-quick-sort alpha-desc" style="margin-left: 5px;">
                                                <a href="#" @click.prevent="setSort('alpha-desc')"
                                                    :class="{ active: currentSort === 'alpha-desc' }"
                                                    title="Tên Z-A"><i></i>Tên Z-A</a>
                                            </li>
                                            <li class="btn-quick-sort position-desc" style="margin-left: 5px;">
                                                <a href="#" @click.prevent="setSort('created-desc')"
                                                    :class="{ active: currentSort === 'created-desc' }"
                                                    title="Hàng mới"><i></i>Hàng mới</a>
                                            </li>
                                            <li class="btn-quick-sort price-asc" style="margin-left: 5px;">
                                                <a href="#" @click.prevent="setSort('price-asc')"
                                                    :class="{ active: currentSort === 'price-asc' }"
                                                    title="Giá thấp đến cao"><i></i>Giá thấp đến cao</a>
                                            </li>
                                            <li class="btn-quick-sort price-desc" style="margin-left: 5px;">
                                                <a href="#" @click.prevent="setSort('price-desc')"
                                                    :class="{ active: currentSort === 'price-desc' }"
                                                    title="Giá cao xuống thấp"><i></i>Giá cao xuống thấp</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>





                            <!-- <div class="row">
                                <div class="col-xl-3" v-for="item in products" :key="item.name"
                                    style="margin-right: 15px;">
                                    <div class="prod1 position-relative">

                                        <div class="prod1img">
                                            <img :src="item.imageUrls?.[0] ? 'http://localhost:8080/images/' + item.imageUrls[0] : '/no-image.png'"
                                                alt="" style="border-radius: 10px; height: 250px" />

                                        </div>


                                        <div class="muangay1" v-if="item.discountPercentage">
                                            <div class="btnmuangay1 ps-2 fs-6"
                                                style="height: 25px; width: 55px; background-color: rgb(249, 55, 55); color: white; border-top-right-radius: 12px; border-bottom-left-radius: 12px;">
                                                -{{ Math.round(item.discountPercentage) }}%
                                            </div>
                                        </div>


                                        <div class="muangay2">
                                            <div class="btnmuangay2 ps-2 text-danger fs-4">
                                                <i class="bi bi-heart"></i>
                                            </div>
                                        </div>


                                        <div class="muangay3">
                                            <div class="btnmuangay3 ps-2 fs-6"
                                                style="height: 25px; width: 55px; background-color:#cd9b32; color: white; border-top-right-radius:12px; border-bottom-left-radius: 12px;">
                                                New
                                            </div>
                                        </div>


                                        <div class="muangay10">
                                            <input type="hidden" name="muangay10" />
                                            <a href="" class="btnmuangay10 fs-5 text-white pb-3"
                                                @click.prevent="openPopup(item)"
                                                style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px"><i
                                                    class="bi bi-basket2-fill"></i></a>

                                            <a href="" class="btnmuangay11 fs-5 text-white pb-3"
                                                style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px"><i
                                                    class="bi bi-search"></i></a>
                                        </div>


                                        <p class="fw-bold pt-3 product-name" style="text-align: center;">
                                            <RouterLink :to="`/product/${item.id}`">{{ item.name }}</RouterLink>
                                        </p>


                                        <p style="text-align: center;">
                                            <span class="fw-bold text-warning">
                                                {{
                                                    item.price
                                                        ? (
                                                            item.price * (1 - (item.discountPercentage || 0) / 100)
                                                        ).toLocaleString()
                                                        : 'Liên hệ'
                                                }}
                                                đ
                                            </span>

                                            <span class="ps-3 text-body-secondary"
                                                v-if="item.price && item.discountPercentage">
                                                <del>{{ item.price.toLocaleString() }}đ</del>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>




                            <div class="section pagenav clearfix a-center">
                                <nav class="collection-paginate clearfix relative nav_pagi w_100">
                                    <ul class="pagination clearfix">
                                        <li class="page-item"><a class="page-link link-next-pre" onclick="doSearch(1)"
                                                href="javascript:;" style="pointer-events:none" title="1">«</a></li>
                                        <li class="page-item"><a class="page-link" onclick="doSearch(1)"
                                                href="javascript:;">1</a></li>
                                        <li class="active page-item disabled"><a class="page-link"
                                                href="javascript:;">2</a></li>
                                        <li class="page-item disabled"><a class="page-link" href="#">»</a></li>
                                    </ul>
                                </nav>
                            </div> -->




                            <div>
                                <!-- Thông báo khi không có sản phẩm -->
                                <div v-if="filteredProducts.length === 0" class="no-products-message">
                                    <div class="text-center py-5">
                                        <i class="bi bi-search" style="font-size: 3rem; color: #ccc;"></i>
                                        <h4 class="mt-3 text-muted">Không tìm thấy sản phẩm nào</h4>
                                        <p class="text-muted">Hãy thử thay đổi bộ lọc hoặc tìm kiếm với từ khóa khác</p>
                                        <button @click="clearAllFilters" class="btn btn-outline-primary">
                                            Xóa tất cả bộ lọc
                                        </button>
                                    </div>
                                </div>

                                <!-- Hiển thị số lượng sản phẩm -->
                                <div v-if="filteredProducts.length > 0" class="products-count mb-3">
                                    <span class="text-muted">Tìm thấy {{ filteredProducts.length }} sản phẩm</span>
                                </div>

                                <!-- <div class="row" v-if="filteredProducts.length > 0" :class="{ 'filter-loading': isFiltering }">
                                    <div class="col-xl-3" v-for="item in paginatedProducts" :key="item.name">
                                        <div class="prod1 position-relative">

                                            <div class="prod1img">
                                                <img :src="item.imageUrls?.[0] ? 'http://localhost:8080/images/' + item.imageUrls[0] : '/no-image.png'"
                                                    alt="" style="border-radius: 10px; height: 250px" />
                                            </div>


                                            <div class="muangay1" v-if="item.discountPercentage">
                                                <div class="btnmuangay1 ps-2 fs-6"
                                                    style="height: 25px; width: 55px; background-color: rgb(249, 55, 55); color: white; border-top-right-radius: 12px; border-bottom-left-radius: 12px;">
                                                    -{{ Math.round(item.discountPercentage) }}%
                                                </div>
                                            </div>


                                            <div class="muangay2">
                                                <div class="btnmuangay2 ps-2 text-danger fs-4" @click="toggleFavorite(item)" style="cursor: pointer;">
                                                    <i :class="isFavorite(item.id) ? 'bi bi-heart-fill' : 'bi bi-heart'"></i>
                                                </div>
                                            </div>


                                            <div class="muangay3">
                                                <div class="btnmuangay3 ps-2 fs-6"
                                                    style="height: 25px; width: 55px; background-color:#cd9b32; color: white; border-top-right-radius:12px; border-bottom-left-radius: 12px;">
                                                    New
                                                </div>
                                            </div>


                                            <div class="muangay10">
                                                <input type="hidden" name="muangay10" />
                                                <a href="" class="btnmuangay10 fs-5 text-white pb-3"
                                                    @click.prevent="openPopup(item)"
                                                    style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px">
                                                    <i class="bi bi-basket2-fill"></i>
                                                </a>

                                                <a href="" class="btnmuangay11 fs-5 text-white pb-3"
                                                    style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px">
                                                    <i class="bi bi-search"></i>
                                                </a>
                                            </div>


                                            <p class="fw-bold pt-3 product-name" style="text-align: center;">
                                                <a
                                                    href="javascript:void(0)"
                                                    class="product-link"
                                                    :title="`Xem chi tiết ${item.name}`"
                                                    @click="viewProductDetail(item.id)"
                                                    @keydown.enter="viewProductDetail(item.id)"
                                                    @keydown.space="viewProductDetail(item.id)"
                                                    role="button"
                                                    tabindex="0"
                                                >
                                                    {{ item.name }}
                                                </a>
                                            </p>

                                            <p style="text-align: center;">
                                                <span class="fw-bold text-warning">
                                                    {{
                                                        item.price
                                                            ? (item.price * (1 - (item.discountPercentage || 0) /
                                                                100)).toLocaleString()
                                                            : 'Liên hệ'
                                                    }}
                                                    đ
                                                </span>
                                                <span class="ps-3 text-body-secondary"
                                                    v-if="item.price && item.discountPercentage">
                                                    <del>{{ item.price.toLocaleString() }}đ</del>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                </div> -->
<div class="row" v-if="filteredProducts.length > 0" :class="{ 'filter-loading': isFiltering }">
  <div class="col-xl-3" v-for="item in paginatedProducts" :key="item.id">
    <div class="prod1 position-relative">

      <!-- Hình -->
      <div class="prod1img">
        <img :src="item.imageUrls?.[0] ? 'http://localhost:8080/images/' + item.imageUrls[0] : '/no-image.png'"
             alt="" style="border-radius: 10px; height: 250px" />
      </div>


<div v-if="item.discountPercentage > 0" class="muangay1">
  <div class="btnmuangay1 ps-2 fs-6"
       style="height: 25px; width: 55px; background-color: rgb(249, 55, 55); color: white; border-top-right-radius: 12px; border-bottom-left-radius: 12px;">
    -{{ Math.round(item.discountPercentage) }}%
  </div>
</div>

<!-- Icon tim -->
<!-- <div class="muangay2">
  <div class="btnmuangay2 ps-2 text-danger fs-4" @click="toggleFavorite(item)" style="cursor: pointer;">
    <i :class="isFavorite(item.id) ? 'bi bi-heart-fill' : 'bi bi-heart'"></i>
  </div>
</div> -->
<div class="muangay2">
                                            <div class="btnmuangay2 ps-2 fs-4" @click="toggleFavorite(item)"
                                                style="cursor:pointer;">
                                                <i :class="favoriteStatus[item.id] ? 'bi bi-heart-fill text-danger' : 'bi bi-heart'"
                                                    style="font-size: 28px;"></i>
                                            </div>
                                        </div>

<!-- Tag New -->
<div v-if="item.isNew"
     class="muangay3"
     :style="item.discountPercentage > 0 ? 'margin-top:5px;' : ''">
  <div class="btnmuangay3 ps-2 fs-6"
       style="height: 25px; width: 55px; background-color:#cd9b32; color: white; border-top-right-radius:12px; border-bottom-left-radius: 12px;">
    New
  </div>
</div>

      <!-- Nút mua / xem chi tiết -->
      <div class="muangay10">
        <input type="hidden" name="muangay10" />
        <a href="" class="btnmuangay10 fs-5 text-white pb-3"
           @click.prevent="openPopup(item)"
           style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px">
          <i class="bi bi-basket2-fill"></i>
        </a>

        <a href="" class="btnmuangay11 fs-5 text-white pb-3"
           style="border-radius: 50px; background-color: #cd9b32; width: 58px; height: 56px">
          <i class="bi bi-search"></i>
        </a>
      </div>

      <!-- Tên sản phẩm -->
      <p class="fw-bold pt-3 product-name" style="text-align: center;">
        <a href="javascript:void(0)"
           class="product-link"
           :title="`Xem chi tiết ${item.name}`"
           @click="viewProductDetail(item.id)"
           @keydown.enter="viewProductDetail(item.id)"
           @keydown.space="viewProductDetail(item.id)"
           role="button"
           tabindex="0"
        >
          {{ item.name }}
        </a>
      </p>


<!-- <p style="text-align: center;">

  <span v-if="item.productVariants.length && item.productVariants.some(v => v.discountPercentage > 0)">
    <span class="fw-bold text-warning">
      {{
        (() => {
          const minVariant = item.productVariants.reduce((prev, curr) =>
            prev.finalPrice < curr.finalPrice ? prev : curr
          );
          return minVariant.finalPrice.toLocaleString();
        })()
      }}đ
    </span>
    <span class="ps-3 text-body-secondary">
      <del>
        {{
          (() => {
            const minVariant = item.productVariants.reduce((prev, curr) =>
              prev.finalPrice < curr.finalPrice ? prev : curr
            );
            return minVariant.price.toLocaleString();
          })()
        }}đ
      </del>
    </span>
  </span>


  <span v-else>
    Liên hệ
  </span>
</p> -->

<p style="text-align: center;">
  <!-- Nếu có giảm giá -->
  <span v-if="item.productVariants.length && item.productVariants.some(v => v.discountPercentage > 0)">
    <span class="fw-bold text-warning">
      {{
        (() => {
          const minVariant = item.productVariants.reduce((prev, curr) =>
            prev.finalPrice < curr.finalPrice ? prev : curr
          );
          return minVariant.finalPrice.toLocaleString();
        })()
      }}đ
    </span>
    <span class="ps-3 text-body-secondary">
      <del>
        {{
          (() => {
            const minVariant = item.productVariants.reduce((prev, curr) =>
              prev.finalPrice < curr.finalPrice ? prev : curr
            );
            return minVariant.price.toLocaleString();
          })()
        }}đ
      </del>
    </span>
  </span>

  <!-- Nếu KHÔNG có giảm giá nhưng có variant -->
  <span v-else-if="item.productVariants.length">
    <span class="fw-bold text-warning">
      {{
        (() => {
          const minVariant = item.productVariants.reduce((prev, curr) =>
            prev.price < curr.price ? prev : curr
          );
          return minVariant.price.toLocaleString();
        })()
      }}đ
    </span>
  </span>

  <!-- Nếu không có variant -->
  <span v-else>
    Liên hệ
  </span>
</p>

    </div>
  </div>
</div>


                                <!-- PHÂN TRANG -->
                                <div class="section pagenav clearfix a-center mt-4">
                                    <nav class="collection-paginate clearfix relative nav_pagi w_100">
                                        <ul class="pagination clearfix justify-content-center">
                                            <li class="page-item" :class="{ disabled: currentPage === 1 }">
                                                <a class="page-link" href="#"
                                                    @click.prevent="goToPage(currentPage - 1)">«</a>
                                            </li>

                                            <li class="page-item" v-for="page in totalPages" :key="page"
                                                :class="{ active: currentPage === page }">
                                                <a class="page-link" href="#" @click.prevent="goToPage(page)">
                                                    {{ page }}
                                                </a>
                                            </li>

                                            <li class="page-item" :class="{ disabled: currentPage === totalPages }">
                                                <a class="page-link" href="#"
                                                    @click.prevent="goToPage(currentPage + 1)">»</a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>




                        </div>
                    </div>
                </div>

            </section>
        </div>


    </div>


    <!-- Popup biến thể -->

    <div v-if="showPopup" class="popup-overlay">
        <div class="popup-content">
            <!-- Nút đóng -->
            <button class="btn-close" @click="closePopup">&times;</button>

            <!-- Hình ảnh & Tên sản phẩm -->
            <div class="product-header">
                <img :src="'http://localhost:8080/images/' + selectedProduct?.imageUrls?.[0]" class="main-image" />

<div class="price-info">
  <div class="price">
    <!-- Giá hiện tại luôn hiển thị màu vàng -->
    <span class="new-price text-warning">
      {{
        selectedVariant
          ? selectedVariant.finalPrice.toLocaleString()
          : defaultVariant
            ? defaultVariant.finalPrice.toLocaleString()
            : '---'
      }} đ
    </span>

    <!-- Giá gốc chỉ gạch khi có giảm giá -->
    <span
      v-if="(selectedVariant?.discountPercentage || defaultVariant?.discountPercentage) && (selectedVariant?.price || defaultVariant?.price) > (selectedVariant?.finalPrice || defaultVariant?.finalPrice)"
      class="old-price text-muted text-decoration-line-through ms-2">
      {{ (selectedVariant?.price || defaultVariant?.price)?.toLocaleString() }} đ
    </span>
  </div>

  <div class="stock">
    Kho: {{ selectedVariant?.quantity ?? defaultVariant?.quantity ?? '---' }}
  </div>
</div>


            </div>

            <!-- Các biến thể -->
            <div class="option-group">
                <div class="label">Size</div>
                <div class="option-list">
                    <button v-for="s in getUnique('size')" :key="'size-' + s" @click="handleVariantSelection('size', s)"
                        :class="['variant-button', selectedSize === s ? 'active' : isOptionAvailable('size', s) ? '' : 'disabled']"
                        :disabled="!isOptionAvailable('size', s)">
                        {{ s }}
                    </button>
                </div>
            </div>

            <div class="option-group">
                <div class="label">Hình dáng</div>
                <div class="option-list">
                    <button v-for="s in getUnique('shape')" :key="'shape-' + s"
                        @click="handleVariantSelection('shape', s)"
                        :class="['variant-button', selectedShape === s ? 'active' : isOptionAvailable('shape', s) ? '' : 'disabled']"
                        :disabled="!isOptionAvailable('shape', s)">
                        {{ s }}
                    </button>
                </div>
            </div>

            <div class="option-group">
                <div class="label">Hương vị</div>
                <div class="option-list">
                    <button v-for="s in getUnique('flavor')" :key="'flavor-' + s"
                        @click="handleVariantSelection('flavor', s)"
                        :class="['variant-button', selectedFlavor === s ? 'active' : isOptionAvailable('flavor', s) ? '' : 'disabled']"
                        :disabled="!isOptionAvailable('flavor', s)">
                        {{ s }}
                    </button>
                </div>
            </div>

            <div class="option-group">
                <div class="label">Xuất xứ</div>
                <div class="option-list">
                    <button v-for="s in getUnique('origin')" :key="'origin-' + s"
                        @click="handleVariantSelection('origin', s)"
                        :class="['variant-button', selectedOrigin === s ? 'active' : isOptionAvailable('origin', s) ? '' : 'disabled']"
                        :disabled="!isOptionAvailable('origin', s)">
                        {{ s }}
                    </button>
                </div>
            </div>

            <!-- Thông báo trạng thái chọn biến thể -->
            <div v-if="selectedSize || selectedShape || selectedFlavor || selectedOrigin" class="selection-status mb-3">
                <div class="alert alert-info">
                    <strong>Đã chọn:</strong>
                    <span v-if="selectedSize" class="badge bg-primary me-2">{{ selectedSize }}</span>
                    <span v-if="selectedShape" class="badge bg-success me-2">{{ selectedShape }}</span>
                    <span v-if="selectedFlavor" class="badge bg-warning me-2">{{ selectedFlavor }}</span>
                    <span v-if="selectedOrigin" class="badge bg-info me-2">{{ selectedOrigin }}</span>
                </div>
                <div v-if="!selectedVariant && (selectedSize && selectedShape && selectedFlavor && selectedOrigin)" class="alert alert-warning mt-2">
                    <i class="bi bi-exclamation-triangle"></i>
                    Kết hợp này không có sẵn. Vui lòng thử kết hợp khác!
                </div>
            </div>

            <!-- Số lượng -->
            <div class="mb-3">
                <label class="fw-bold">Số lượng:</label>
                <div class="quantity-wrapper mt-1">
                    <button class="quantity-btn" @click="decreaseQuantity">−</button>
                    <input type="text" class="quantity-input" :value="quantity" readonly />
                    <button class="quantity-btn" @click="increaseQuantity">+</button>
                </div>
            </div>

            <!-- Nút thêm vào giỏ -->
            <div class="d-flex">
                <button class="add-to-cart" @click="addToCart(selectedVariant?.id)"
                    :disabled="!selectedVariant || (selectedVariant?.quantity ?? 0) === 0"
                    :title="!selectedVariant ? 'Vui lòng chọn đầy đủ biến thể sản phẩm' : (selectedVariant?.quantity === 0 ? 'Hết hàng' : 'Thêm vào giỏ hàng')"
                    style="width: 100%;">
                    {{ !selectedVariant ? 'Chọn biến thể' : (selectedVariant?.quantity === 0 ? 'Hết hàng' : 'Thêm vào Giỏ hàng') }}
                </button>
            </div>

        </div>
    </div>





</template>

<script setup>
import { ref, onMounted, watch, nextTick, computed } from 'vue'
import { useRouter } from 'vue-router'
import Swal from 'sweetalert2'
import api from '@/axios' //  axios đã cấu hình interceptor

// ========== Yêu thích sản phẩm ==========
const favoriteStatus = ref({}) // Lưu trạng thái yêu thích của từng sản phẩm

// Kiểm tra trạng thái yêu thích của sản phẩm
const checkFavoriteStatus = async (productId) => {
    try {
        const response = await api.get('/api/favorites/check', {
            params: { productId }
        })
        if (response.data.success) {
            favoriteStatus.value[productId] = response.data.isFavorite
        }
    } catch (error) {
        console.error('Lỗi khi kiểm tra trạng thái yêu thích:', error)
    }
}

// Toggle yêu thích sản phẩm
const toggleFavorite = async (product) => {
    try {
        const response = await api.post('/api/favorites/toggle', null, {
            params: { productId: product.id }
        })

        if (response.data.success) {
            favoriteStatus.value[product.id] = response.data.isFavorite

            // Hiển thị thông báo
            Swal.fire({
                icon: 'success',
                title: response.data.message,
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 2000
            })
        }
    } catch (error) {
        console.error('Lỗi khi toggle yêu thích:', error)
        if (error.response?.status === 401) {
            Swal.fire({
                icon: 'warning',
                title: 'Bạn chưa đăng nhập',
                text: 'Vui lòng đăng nhập để sử dụng tính năng yêu thích',
                confirmButtonText: 'Đăng nhập',
            }).then((result) => {
                if (result.isConfirmed) {
                    router.push('/Login')
                }
            })
        } else {
            Swal.fire({
                icon: 'error',
                title: 'Có lỗi xảy ra',
                text: error.response?.data?.message || 'Không thể thực hiện thao tác yêu thích'
            })
        }
    }
}


// ========== Phân trang ==========
const products = ref([])
const currentPage = ref(1)
const itemsPerPage = 8

// ========== Bộ lọc ==========
const selectedPriceRanges = ref([])
const selectedProductTypes = ref([])
const selectedWeights = ref([])
const isFiltering = ref(false)

// Danh sách khoảng giá
const priceRanges = [
    { id: 'duoi-10-000d', label: 'Dưới 10.000đ', min: 0, max: 10000 },
    { id: '10-000d-50-000d', label: 'Từ 10.000đ - 50.000đ', min: 10000, max: 50000 },
    { id: '50-000d-100-000d', label: 'Từ 50.000đ - 100.000đ', min: 50000, max: 100000 },
    { id: '100-000d-200-000d', label: 'Từ 100.000đ - 200.000đ', min: 100000, max: 200000 },
    { id: '200-000d-300-000d', label: 'Từ 200.000đ - 300.000đ', min: 200000, max: 300000 },
    { id: '300-000d-500-000d', label: 'Từ 300.000đ - 500.000đ', min: 300000, max: 500000 },
    { id: '500-000d-1-000-000d', label: 'Từ 500.000đ - 1 triệu', min: 500000, max: 1000000 },
    { id: 'tren1-000-000d', label: 'Trên 1 triệu', min: 1000000, max: Infinity }
]

// Danh sách loại sản phẩm
const productTypes = [
    { id: 'banh-kem', label: 'Bánh kem', value: 'Bánh kem' },
    { id: 'banh-kho', label: 'Bánh khô', value: 'Bánh khô' },
    { id: 'banh-mi', label: 'Bánh mì', value: 'Bánh mì' },
    { id: 'banh-mieng', label: 'Bánh miếng', value: 'Bánh miếng' },
    { id: 'banh-mousse', label: 'Bánh mousse', value: 'Bánh mousse' },
    { id: 'banh-ngot', label: 'Bánh ngọt', value: 'Bánh ngọt' },
    { id: 'banh-trang-mieng', label: 'Bánh tráng miệng', value: 'Bánh tráng miệng' }
]

// Danh sách trọng lượng
const weights = [
    { id: '90g', label: '90g', value: '90g' },
    { id: '100g', label: '100g', value: '100g' },
    { id: '107g', label: '107g', value: '107g' },
    { id: '120g', label: '120g', value: '120g' },
    { id: '200g', label: '200g', value: '200g' },
    { id: '220g', label: '220g', value: '220g' },
    { id: '250g', label: '250g', value: '250g' },
    { id: '400g', label: '400g', value: '400g' },
    { id: '500g', label: '500g', value: '500g' },
    { id: '700g', label: '700g', value: '700g' },
    { id: '900g', label: '900g', value: '900g' },
    { id: '1-4kg', label: '1.4kg', value: '1.4kg' }
]

// Sản phẩm đã được lọc
const filteredProducts = computed(() => {
    let result = [...products.value]

    // Lọc theo khoảng giá
    if (selectedPriceRanges.value.length > 0) {
        result = result.filter(product => {
            const price = product.price || 0
            return selectedPriceRanges.value.some(rangeId => {
                const range = priceRanges.find(r => r.id === rangeId)
                if (!range) return false

                if (range.max === Infinity) {
                    return price >= range.min
                }
                return price >= range.min && price <= range.max
            })
        })
    }

    // Lọc theo loại sản phẩm
    if (selectedProductTypes.value.length > 0) {
        result = result.filter(product => {
            return selectedProductTypes.value.some(typeId => {
                const type = productTypes.find(t => t.id === typeId)
                return type && product.productType === type.value
            })
        })
    }

    // Lọc theo trọng lượng
    if (selectedWeights.value.length > 0) {
        result = result.filter(product => {
            return selectedWeights.value.some(weightId => {
                const weight = weights.find(w => w.id === weightId)
                return weight && product.tags && product.tags.includes(weight.value)
            })
        })
    }

    return result
})

// ========== Sắp xếp ==========
const currentSort = ref('created-desc')

const setSort = (sortKey) => {
    currentSort.value = sortKey
    currentPage.value = 1
}

const sortedProducts = computed(() => {
    const arr = [...filteredProducts.value]
    switch (currentSort.value) {
        case 'alpha-asc':
            return arr.sort((a, b) => (a.name || '').localeCompare(b.name || ''))
        case 'alpha-desc':
            return arr.sort((a, b) => (b.name || '').localeCompare(a.name || ''))
        case 'price-asc':
            return arr.sort((a, b) => (a.price || 0) - (b.price || 0))
        case 'price-desc':
            return arr.sort((a, b) => (b.price || 0) - (a.price || 0))
        case 'created-desc':
        default:
            return arr.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
    }
})

// Sản phẩm đã phân trang sau khi lọc + sắp xếp
const paginatedProducts = computed(() => {
    const start = (currentPage.value - 1) * itemsPerPage
    const end = start + itemsPerPage
    return sortedProducts.value.slice(start, end)
})

const totalPages = computed(() => Math.ceil(sortedProducts.value.length / itemsPerPage))

const goToPage = (page) => {
    if (page >= 1 && page <= totalPages.value) {
        currentPage.value = page
    }
}

// ========== Xử lý bộ lọc ==========
const handlePriceFilter = (rangeId, checked) => {
    isFiltering.value = true
    if (checked) {
        selectedPriceRanges.value.push(rangeId)
    } else {
        const index = selectedPriceRanges.value.indexOf(rangeId)
        if (index > -1) {
            selectedPriceRanges.value.splice(index, 1)
        }
    }
    currentPage.value = 1 // Reset về trang đầu

    // Simulate loading delay
    setTimeout(() => {
        isFiltering.value = false
    }, 300)
}

const handleProductTypeFilter = (typeId, checked) => {
    isFiltering.value = true
    if (checked) {
        selectedProductTypes.value.push(typeId)
    } else {
        const index = selectedProductTypes.value.indexOf(typeId)
        if (index > -1) {
            selectedProductTypes.value.splice(index, 1)
        }
    }
    currentPage.value = 1 // Reset về trang đầu

    // Simulate loading delay
    setTimeout(() => {
        isFiltering.value = false
    }, 300)
}

const handleWeightFilter = (weightId, checked) => {
    isFiltering.value = true
    if (checked) {
        selectedWeights.value.push(weightId)
    } else {
        const index = selectedWeights.value.indexOf(weightId)
        if (index > -1) {
            selectedWeights.value.splice(index, 1)
        }
    }
    currentPage.value = 1 // Reset về trang đầu

    // Simulate loading delay
    setTimeout(() => {
        isFiltering.value = false
    }, 300)
}

// Kiểm tra xem có bộ lọc nào đang được áp dụng không
const hasActiveFilters = computed(() => {
    return selectedPriceRanges.value.length > 0 ||
           selectedProductTypes.value.length > 0 ||
           selectedWeights.value.length > 0
})

// Xóa tất cả bộ lọc
const clearAllFilters = () => {
    selectedPriceRanges.value = []
    selectedProductTypes.value = []
    selectedWeights.value = []
    currentPage.value = 1

    // Uncheck tất cả checkbox
    const checkboxes = document.querySelectorAll('input[type="checkbox"]')
    checkboxes.forEach(checkbox => {
        checkbox.checked = false
    })
}

// ========== Router ==========
const router = useRouter()

// ========== Xem chi tiết sản phẩm ==========
const viewProductDetail = (productId) => {
    router.push(`/product/${productId}`)
}

// ========== Load sản phẩm ==========
const loadProducts = async () => {
    try {
        const res = await api.get('/api/products/simple')
        products.value = res.data.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
    } catch (error) {
        alert('Lỗi khi tải danh sách sản phẩm!')
        console.error(error)
    }
}

// ========== Quản lý sản phẩm yêu thích ==========
const favoriteProducts = ref([])

onMounted(async () => {
    try {
        const res = await api.get('/api/favorites/me/products')
        favoriteProducts.value = (res.data || []).map(p => ({
            id: p.id,
            name: p.name,
            price: p.originalPrice,
            discountPercentage: p.discountPercentage,
            image: p.imageUrl ? (p.imageUrl.startsWith('http') ? p.imageUrl : `http://localhost:8080/images/${p.imageUrl}`) : '/no-image.png'
        }))
    } catch (e) {
        // If unauthorized, keep empty and let user login when toggling
        favoriteProducts.value = []
    }
})

// Kiểm tra sản phẩm có trong danh sách yêu thích không
const isFavorite = (productId) => {
    return favoriteProducts.value.some(product => product.id === productId)
}

// Thêm/xóa sản phẩm khỏi danh sách yêu thích (DB)
const togggleFavorite = async (product) => {
    try {
        const res = await api.post(`/api/favorites/toggle/${product.id}`)
        const favorited = res.data?.favorited
        if (favorited) {
            const favoriteProduct = {
                id: product.id,
                name: product.name,
                price: product.price,
                discountPercentage: product.discountPercentage,
                image: product.imageUrls?.[0] ? `http://localhost:8080/images/${product.imageUrls[0]}` : '/no-image.png'
            }
            if (!favoriteProducts.value.some(p => p.id === product.id)) {
                favoriteProducts.value.push(favoriteProduct)
            }
            Swal.fire({
                icon: 'success',
                title: 'Đã thêm vào danh sách yêu thích!',
                text: `${product.name} đã được thêm vào danh sách yêu thích.`,
                timer: 2000,
                showConfirmButton: false
            })
        } else {
            favoriteProducts.value = favoriteProducts.value.filter(p => p.id !== product.id)
            Swal.fire({
                icon: 'success',
                title: 'Đã xóa khỏi danh sách yêu thích!',
                text: `${product.name} đã được xóa khỏi danh sách yêu thích.`,
                timer: 2000,
                showConfirmButton: false
            })
        }
        window.dispatchEvent(new CustomEvent('favoritesChanged'))
    } catch (e) {
        Swal.fire({
            icon: 'warning',
            title: 'Vui lòng đăng nhập',
            text: 'Bạn cần đăng nhập để sử dụng chức năng yêu thích.',
            showConfirmButton: true
        })
    }
}

// ========== Slide banner ==========
let sliderIndex = 0
let interval

function changeSlide(n) {
    showSlide((sliderIndex += n))
    fixInterval()
}

function showSlide(n) {
    const container = document.getElementsByClassName('carousel-inner')[0]
    if (!container) return

    const sliders = container.children
    for (let i = 0; i < sliders.length; i++) {
        sliders[i].style.display = 'none'
    }

    if (n >= sliders.length) sliderIndex = 0
    if (n < 0) sliderIndex = sliders.length - 1

    sliders[sliderIndex].style.display = 'block'
}

function startSlideshow() {
    interval = setInterval(() => changeSlide(1), 3000)
}

function stopSlideshow() {
    clearInterval(interval)
    interval = null
}

function fixInterval() {
    stopSlideshow()
    startSlideshow()
}

// ========== Hover sản phẩm ==========
function MouseOver(event) {
    const productElement = event.currentTarget
    const buyNowButton = productElement.querySelector('.btnmuangay10')
    const buyNowButton1 = productElement.querySelector('.btnmuangay11')

    productElement.style.transform = 'scale(1)'
    productElement.style.transition = 'transform 0.3s ease'

    if (buyNowButton) buyNowButton.style.display = 'block'
    if (buyNowButton1) buyNowButton1.style.display = 'block'
}

function MouseOut(event) {
    const productElement = event.currentTarget
    const buyNowButton = productElement.querySelector('.btnmuangay10')
    const buyNowButton1 = productElement.querySelector('.btnmuangay11')

    productElement.style.transform = 'scale(1)'
    if (buyNowButton) buyNowButton.style.display = 'none'
    if (buyNowButton1) buyNowButton1.style.display = 'none'
}

watch(products, async () => {
    await nextTick()
    const productElements = document.querySelectorAll('.prod1')
    productElements.forEach((el) => {
        el.addEventListener('mouseover', MouseOver)
        el.addEventListener('mouseout', MouseOut)
    })
    // Kiểm tra trạng thái yêu thích cho tất cả sản phẩm
    products.value.forEach(product => {
        checkFavoriteStatus(product.id)
    })
})

// ========== Popup sản phẩm ==========
const showPopup = ref(false)
const selectedProduct = ref(null)
const selectedVariant = ref(null)

const selectedSize = ref('')
const selectedShape = ref('')
const selectedFlavor = ref('')
const selectedOrigin = ref('')

const defaultVariant = computed(() => selectedProduct.value?.productVariants?.[0] || null)

const quantity = ref(1)

const openPopup = (item) => {
    selectedProduct.value = item
    resetSelections()
    showPopup.value = true
}

const closePopup = () => {
    showPopup.value = false
}

const resetSelections = () => {
    selectedSize.value = ''
    selectedShape.value = ''
    selectedFlavor.value = ''
    selectedOrigin.value = ''
    quantity.value = 1
    selectedVariant.value = null
}

const updateVariant = () => {
    const variants = selectedProduct.value.productVariants

    // Tìm biến thể phù hợp với các lựa chọn hiện tại
    let found = null

    if (selectedSize.value && selectedShape.value && selectedFlavor.value && selectedOrigin.value) {
        // Nếu đã chọn đủ 4 thuộc tính, tìm biến thể chính xác
        found = variants.find(
            (v) =>
                v.size === selectedSize.value &&
                v.shape === selectedShape.value &&
                v.flavor === selectedFlavor.value &&
                v.origin === selectedOrigin.value
        )
    } else if (selectedSize.value || selectedShape.value || selectedFlavor.value || selectedOrigin.value) {
        // Nếu chưa chọn đủ, tìm biến thể đầu tiên phù hợp với các lựa chọn đã có
        found = variants.find(
            (v) =>
                (!selectedSize.value || v.size === selectedSize.value) &&
                (!selectedShape.value || v.shape === selectedShape.value) &&
                (!selectedFlavor.value || v.flavor === selectedFlavor.value) &&
                (!selectedOrigin.value || v.origin === selectedOrigin.value)
        )
    }

    selectedVariant.value = found || null
}

const getUnique = (field) => {
    const variants = selectedProduct.value?.productVariants || []

    // Hiển thị tất cả các giá trị có thể chọn, không lọc theo lựa chọn hiện tại
    // Cho phép chọn chéo biến thể một cách tự do
    return [...new Set(variants.map((v) => v[field]))]
}

// Lấy danh sách thuộc tính có sẵn dựa trên các lựa chọn hiện tại
const getAvailableOptions = (field) => {
    if (!selectedProduct.value?.productVariants) return []

    let filteredVariants = selectedProduct.value.productVariants

    // Lọc theo các lựa chọn đã chọn
    if (selectedSize.value && field !== 'size') {
        filteredVariants = filteredVariants.filter(v => v.size === selectedSize.value)
    }
    if (selectedShape.value && field !== 'shape') {
        filteredVariants = filteredVariants.filter(v => v.shape === selectedShape.value)
    }
    if (selectedFlavor.value && field !== 'flavor') {
        filteredVariants = filteredVariants.filter(v => v.flavor === selectedFlavor.value)
    }
    if (selectedOrigin.value && field !== 'origin') {
        filteredVariants = filteredVariants.filter(v => v.origin === selectedOrigin.value)
    }

    return [...new Set(filteredVariants.map(v => v[field]))]
}

// Xử lý khi chọn một biến thể
const handleVariantSelection = (field, value) => {
    // Nếu đã chọn rồi thì bỏ chọn (toggle)
    if (field === 'size' && selectedSize.value === value) {
        selectedSize.value = ''
    } else if (field === 'shape' && selectedShape.value === value) {
        selectedShape.value = ''
    } else if (field === 'flavor' && selectedFlavor.value === value) {
        selectedFlavor.value = ''
    } else if (field === 'origin' && selectedOrigin.value === value) {
        selectedOrigin.value = ''
    } else {
        // Cập nhật giá trị đã chọn
        if (field === 'size') selectedSize.value = value
        else if (field === 'shape') selectedShape.value = value
        else if (field === 'flavor') selectedFlavor.value = value
        else if (field === 'origin') selectedOrigin.value = value
    }

    // Reset các lựa chọn khác nếu không còn khả dụng
    const availableVariants = selectedProduct.value.productVariants?.filter(v => {
        if (field === 'size') return v.size === value
        else if (field === 'shape') return v.shape === value
        else if (field === 'flavor') return v.flavor === value
        else if (field === 'origin') return v.origin === value
        return true
    }) || []

    // Reset các lựa chọn không còn khả dụng
    if (field !== 'size' && selectedSize.value) {
        if (!availableVariants.some(v => v.size === selectedSize.value)) {
            selectedSize.value = ''
        }
    }
    if (field !== 'shape' && selectedShape.value) {
        if (!availableVariants.some(v => v.shape === selectedShape.value)) {
            selectedShape.value = ''
        }
    }
    if (field !== 'flavor' && selectedFlavor.value) {
        if (!availableVariants.some(v => v.flavor === selectedFlavor.value)) {
            selectedFlavor.value = ''
        }
    }
    if (field !== 'origin' && selectedOrigin.value) {
        if (!availableVariants.some(v => v.origin === selectedOrigin.value)) {
            selectedOrigin.value = ''
        }
    }

    updateVariant()
}

// Kiểm tra xem một tùy chọn có khả dụng hay không
const isOptionAvailable = (field, value) => {
    if (!selectedProduct.value?.productVariants) return false

    let filteredVariants = selectedProduct.value.productVariants

    // Lọc theo các lựa chọn đã chọn
    if (selectedSize.value && field !== 'size') {
        filteredVariants = filteredVariants.filter(v => v.size === selectedSize.value)
    }
    if (selectedShape.value && field !== 'shape') {
        filteredVariants = filteredVariants.filter(v => v.shape === selectedShape.value)
    }
    if (selectedFlavor.value && field !== 'flavor') {
        filteredVariants = filteredVariants.filter(v => v.flavor === selectedFlavor.value)
    }
    if (selectedOrigin.value && field !== 'origin') {
        filteredVariants = filteredVariants.filter(v => v.origin === selectedOrigin.value)
    }

    // Kiểm tra xem tùy chọn có tồn tại trong các biến thể đã lọc không
    return filteredVariants.some(v => v[field] === value)
}

//const increaseQuantity = () => quantity.value++
const increaseQuantity = () => {
    const max = selectedVariant.value?.quantity ?? defaultVariant.value?.quantity ?? 1
    if (quantity.value < max) {
        quantity.value++
    } else {
        Swal.fire({
            icon: 'warning',
            title: 'Vượt quá số lượng tồn kho',
            text: 'Bạn đã chọn đến số lượng tối đa hiện có trong kho!',
            confirmButtonText: 'OK',
            position: 'center'
        })
    }
}


const decreaseQuantity = () => {
    if (quantity.value > 1) quantity.value--
}

// ========== Thêm vào giỏ ==========
const addToCart = async (variantId) => {
    if (!selectedVariant.value) {
        let message = 'Vui lòng chọn đầy đủ các biến thể sản phẩm!'

        if (!selectedSize.value || !selectedShape.value || !selectedFlavor.value || !selectedOrigin.value) {
            const missing = []
            if (!selectedSize.value) missing.push('Size')
            if (!selectedShape.value) missing.push('Hình dáng')
            if (!selectedFlavor.value) missing.push('Hương vị')
            if (!selectedOrigin.value) missing.push('Xuất xứ')

            message = `Vui lòng chọn: ${missing.join(', ')}`
        } else {
            message = 'Loại bạn chọn chưa có hàng. Bạn có thể thử đổi size, hình dáng, hương vị hoặc xuất xứ khác!'
        }

        Swal.fire({
            icon: 'info',
            title: 'Chưa chọn đủ biến thể',
            text: message,
            confirmButtonText: 'Thử lại',
        })
        return
    }

    try {
        // Kiểm tra xem user có đăng nhập không
        const token = localStorage.getItem('token')
        if (!token) {
            Swal.fire({
                icon: 'warning',
                title: 'Bạn chưa đăng nhập',
                text: 'Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng',
                confirmButtonText: 'Đăng nhập',
                showCancelButton: true,
                cancelButtonText: 'Hủy'
            }).then((result) => {
                if (result.isConfirmed) {
                    router.push('/dangNhap')
                }
            })
            return
        }

        await api.post('/api/cart/add', {
            variantId: variantId,
            quantity: quantity.value,
        })
        
        Swal.fire({
            icon: 'success',
            title: 'Thêm vào giỏ hàng thành công!',
            timer: 2000,
            showConfirmButton: false,
            toast: true,
            position: 'top-end'
        }).then(() => {
            router.push('/gioHang')
        })
    } catch (err) {
        console.error('❌ Lỗi thêm vào giỏ:', err)
        
        let errorMessage = 'Không thể thêm sản phẩm vào giỏ hàng. Vui lòng thử lại.'
        
        if (err.response) {
            const status = err.response.status
            const data = err.response.data
            
            if (status === 401 || status === 403) {
                errorMessage = 'Bạn chưa đăng nhập hoặc phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại.'
                Swal.fire({
                    icon: 'warning',
                    title: 'Phiên đăng nhập hết hạn',
                    text: errorMessage,
                    confirmButtonText: 'Đăng nhập',
                    showCancelButton: true,
                    cancelButtonText: 'Hủy'
                }).then((result) => {
                    if (result.isConfirmed) {
                        localStorage.removeItem('token')
                        router.push('/dangNhap')
                    }
                })
                return
            } else if (status === 400) {
                errorMessage = data?.error || data?.message || 'Thông tin không hợp lệ'
            } else if (status === 404) {
                errorMessage = 'Không tìm thấy sản phẩm'
            } else if (status >= 500) {
                errorMessage = 'Lỗi server. Vui lòng thử lại sau.'
            }
        } else if (err.request) {
            errorMessage = 'Không thể kết nối đến server. Vui lòng kiểm tra kết nối mạng.'
        }
        
        Swal.fire({
            icon: 'error',
            title: 'Thêm vào giỏ hàng thất bại!',
            text: errorMessage,
            confirmButtonText: 'OK'
        })
    }
}



// ========== Đăng xuất ==========
// const logout = async () => {
//     try {
//         await api.post('/api/auth/logout')
//         router.push('/Login')
//     } catch (error) {
//         console.error('Đăng xuất không thành công', error)
//     }
// }

// ========== Sản phẩm nổi bật ==========
const featuredProducts = ref([])

onMounted(async () => {
    try {
        showSlide(sliderIndex)
        startSlideshow()
        loadProducts()

        const response = await api.get('/api/home/featured')
        featuredProducts.value = response.data
    } catch (error) {
        console.error('Lỗi khi lấy dữ liệu:', error)
    }
})
</script>

<style scoped>
/*Header */
.lien-he {
    font-size: 18px;
    font-family: Roboto;
    background: #fff;
    font-weight: 500;
    color: #000;
    width: 100vw;
}

.bread-crumb .title-bread-crumb {
    text-align: center;
    font-size: 55px;
    color: #cd9b32;
    font-weight: 600;
    font-family: 'Forte';
}

.breadcrumb {
    font-size: 18px;
    padding: 15px 10px;
    line-height: 24px;
    width: 100%;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 auto;
}

.breadcrumb .home {
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
}

.breadcrumb .home a {
    text-decoration: none !important;
    color: white;
    font-size: 18px !important;
    margin-right: 10px;
}

.breadcrumb .home a:nth-child(2) span {
    color: #cd9b32 !important;
    font-size: 18px !important;
}

.breadcrumb li {
    display: inline-block;
    margin: 0 5px;
}

.breadcrumb li:first-child {
    margin-left: 0;
}

.breadcrumb li:last-child {
    margin-right: 0;
}

/* Breadcrumb container styles */
.breadcrumb-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

.breadcrumb-container .breadcrumb {
    background: none;
    border: none;
    box-shadow: none;
}

.breadcrumb-item {
    display: flex;
    align-items: center;
}

.breadcrumb-separator {
    color: #fff;
    font-weight: bold;
    margin: 0 10px;
}

.breadcrumb-item a {
    color: #fff;
    text-decoration: none;
    font-weight: 500;
    transition: color 0.3s ease;
}

.breadcrumb-item a:hover {
    color: #cd9b32;
}

.breadcrumb-item.active span {
    color: #cd9b32;
    font-weight: 600;
}

/* Responsive breadcrumb */
@media (max-width: 768px) {
    .bread-crumb .title-bread-crumb {
        font-size: 40px;
    }

    .breadcrumb {
        font-size: 16px;
        padding: 10px 5px;
    }

    .breadcrumb-container {
        flex-direction: column;
        gap: 5px;
    }

    .breadcrumb {
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
    }
}

@media (max-width: 576px) {
    .bread-crumb .title-bread-crumb {
        font-size: 32px;
    }

    .breadcrumb {
        font-size: 14px;
    }

    .breadcrumb-separator {
        margin: 0 5px;
    }
}

.breadcrumb li a:hover span,
.breadcrumb li.active span,
.breadcrumb li strong span {
    color: #cd9b32;
}

.breadcrumb li>a>span,
.breadcrumb li span {
    color: #fff;
}

.bread-crumb {
    margin-bottom: 40px;
    min-height: 200px;
    background-attachment: fixed;
    background-position: center center;
    background-repeat: no-repeat;
    display: flex;
    align-items: center;
    padding: 150px 0 50px;
}

header.header {
    padding: 10px 0;
    position: absolute;
    top: 0 !important;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 9;
    background-color: transparent;
}

.header .nav-link {
    color: white;
}

.nav-link li a:hover {
    color: #e4a53d;
}

.header .nav-link:hover {
    color: #e4a53d;
}

.btn-primary-custom {
    background-color: #cd9b32;
    color: #ffffff;
    border: none;
    border-radius: 5px;
    font-size: 23px;
    font-weight: bold;
    transition: all 0.3s ease-in-out;
    width: 300px;
}

.btn-primary-custom:hover {
    background-color: #e8b443;
    color: #ffffff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn-primary-custom:active {
    background-color: #003d80;
    transform: scale(0.95);
}

.prod4img {
    position: relative;
    overflow: hidden;
    width: 260px;
    height: 260px;
    border-radius: 15px;
}

.prod4img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    transition: transform 0.3s ease;
    display: block;
}

/* Overlay đen trong suốt */
.overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    /* đen mờ */
    border-radius: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 1;
}

/* Icon camera */
.camera-icon {
    font-size: 70px;
    color: white;
}

/* Hover hiệu ứng */
.prod4img:hover img {
    transform: scale(1.1);
}

.prod4img:hover .overlay {
    opacity: 1;
}


.prod1img {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 250px;
    border-radius: 15px;

}

.prod1img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    transition: transform 0.3s ease;
    display: block;
}

.prod1img:hover img {
    transform: scale(1.1);
}

.prod2img {
    position: relative;
    overflow: hidden;
    width: 270px;
    height: 270px;
    border-radius: 15px;

}

.prod2img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    transition: transform 0.3s ease;
    display: block;
}

.prod2img:hover img {
    transform: scale(1.1);
}

.prod3img {
    position: relative;
    overflow: hidden;
    width: 450px;
    height: 250px;
    border-radius: 15px;

}

.prod3img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    transition: transform 0.3s ease;
    display: block;
}

.prod3img:hover img {
    transform: scale(1.1);
}



.prod {
    position: relative;
    overflow: hidden;
}

.prod:hover img {
    transform: scale(1.1);
}

.prod img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.3s ease;
}



.btnmuangay {
    position: absolute;
    top: 90%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* display: none; */
    z-index: 1;
    padding: 10px 20px;

    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.btnmuangay1 {
    position: absolute;
    top: 7%;
    left: 15%;
    transform: translate(-50%, -50%);
    /* display: none; */
    z-index: 1;

    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.btnmuangay2 {
    position: absolute;
    top: 7%;
    left: 85%;

    transform: translate(-50%, -50%);
    /* display: none; */
    z-index: 1;

    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btnmuangay2:hover {
    transform: translate(-50%, -50%) scale(1.1);
}

.btnmuangay2 i {
    transition: color 0.2s ease;
}

.btnmuangay2 .bi-heart {
    color: #dc3545;
}

.btnmuangay2 .bi-heart-fill {
    color: #dc3545;
}

.btnmuangay3 {
    position: absolute;
    top: 17%;
    left: 15%;
    transform: translate(-50%, -50%);
    /* display: none; */
    z-index: 1;

    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.btnmuangay10 {
    position: absolute;
    top: 50%;
    left: 30%;
    transform: translate(-50%, -50%);
    display: none;
    z-index: 1;
    padding: 10px 20px;

    color: white;
    font-size: 1.2rem;

    text-decoration: none;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
}

.btnmuangay11 {
    position: absolute;
    top: 50%;
    left: 55%;
    transform: translate(-50%, -50%);
    display: none;
    z-index: 1;
    padding: 10px 20px;

    color: white;
    font-size: 1.2rem;

    text-decoration: none;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
}

.prod5 {
    position: relative;
    overflow: hidden;
}

.btnmuangay5 {
    position: absolute;
    top: 10%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* display: none; */
    z-index: 1;
    padding: 10px 20px;
    width: 2000px;
    color: white;
    font-size: 1.2rem;
    text-align: center;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

body {
    font-size: 14px;
    font-family: 'Quicksand', sans-serif;
    background: #fff;
    font-weight: 500;
    color: #000;
}

.bread-crumb .title-bread-crumb {
    text-align: center;
    font-size: 35px;
    color: #cd9b32;
    font-weight: 600;
    font-size: 50px;
    font-family: 'Playball';
}

.breadcrumb {
    margin: 0;
    font-size: 14px;
    padding: 15px 10px;
    border-radius: 0;
    font-weight: 400;
    line-height: 24px;
    width: 100%;
    text-align: center;
    padding-left: 605px;
}

.breadcrumb li {
    display: inline-block;
    margin: 0 10px;
}

.breadcrumb li:first-child {
    margin-left: 0;
}

.breadcrumb li:last-child {
    margin-right: 0;
}

.breadcrumb li .mr_lr svg {
    width: 10px;
    height: 10px;
    margin: 0 5px;
    vertical-align: middle;
}

.breadcrumb li a:hover span,
.breadcrumb li.active span,
.breadcrumb li strong span {
    color: #cd9b32;
}

.breadcrumb li>a>span,
.breadcrumb li span {
    color: #fff;
}

.bread-crumb {
    margin-bottom: 40px;
    min-height: 200px;
    background-attachment: fixed;
    background-position: center center;
    background-repeat: no-repeat;
    display: flex;
    align-items: center;
    padding: 150px 0 50px;
}

header.header {
    padding: 10px 0;
    position: absolute;
    top: 0 !important;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 9;
    background-color: transparent;
}

.header .nav-link {
    color: white;
}

.aside-content-menu .title-head-col {
    position: relative;
    font-size: 18px;
    font-weight: 700;
    padding: 10px 0px;
    color: #000;
    padding: 5px 10px;
    background: #cd9b32;
    color: #fff;
}

.col-lg-3 {
    -ms-flex: 0 0 25%;
    flex: 0 0 25%;
    max-width: 25%;
}

.relative {
    position: relative;
}

ul {
    list-style: none;
    padding-left: 0;
    margin-bottom: 0;
}

li {
    display: list-item;
    text-align: -webkit-match-parent;
    unicode-bidi: isolate;
}

.sort-cate-left ul {
    display: flex;
}

.sort-cate-left h3 {
    color: #000;
    font-size: 14px;
    float: left;
    margin: 0;
    margin-top: 2px;
}

.aside-content-menu .nav-category ul .nav-item .nav-link.pr-5 {
    padding-right: 30px;
}

.aside-content-menu .nav-category {
    padding: 0 10px;
}

.aside-content-menu .nav-category ul .nav-item .nav-link {
    display: block;
    padding: 8px 0;
    font-size: 15px;
    color: #000;
}

.aside-content-menu .nav-category ul {
    padding: 0;
    margin: 0;
    list-style: none;
}

.aside-content-menu .nav-category ul .nav-item .down_icon {
    height: 20px !important;
    width: 20px !important;
    position: absolute;
    right: 7.5px;
    top: 21px;
    transform: translate(0, -50%);
    cursor: pointer;
}

.aside-content-menu {
    margin-bottom: 30px;
    border: 1px solid #e4a53d;
    border-radius: 5px;
    overflow: hidden;
}

.row {
    --bs-gutter-x: 1.5rem;
    --bs-gutter-y: 0;
    display: flex;
    flex-wrap: wrap;
    margin-top: calc(-1* var(--bs-gutter-y));
    margin-right: calc(-.5* var(--bs-gutter-x));
    margin-left: calc(-.5* var(--bs-gutter-x));
}

.sort-cate-left {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}

.sort-cate-left ul li a {
    color: #cd9b32;
    display: block;
    padding: 5px 10px;
    border: 1px solid #e4a53d;
    border-radius: 5px;
}

.sort-cate-left ul li a.active {
    background: #cd9b32;
    color: #fff;
}

a {
    color: #231f20;
    text-decoration: none;
    background-color: transparent;
}

.nav_pagi .pagination {
    position: relative;
    z-index: 1;
    padding: 0 0px;
    margin: 0 0 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    list-style: none;
}

.nav_pagi .pagination .page-link {
    font-weight: 400;
    float: left;
    margin: 0 2.5px;
    width: 35px;
    background: transparent;
    border: solid 1px #000;
    text-align: center;
    height: 35px;
    font-size: 14px;
    padding: 0;
    line-height: 35px;
    color: #000;
    text-decoration: none;
    border-radius: initial;
    border-radius: 8px;
}

.nav_pagi .pagination .page-item.active .page-link {
    background-color: #cd9b32;
    border-color: #cd9b32;
    background: #cd9b32;
    color: #fff;
    display: block;
    font-weight: bold;
}

.col-lg-9 {
    -ms-flex: 0 0 75%;
    flex: 0 0 75%;
    max-width: 75%;
}

.row-fix .col-fix {
    padding-left: 10px;
    padding-right: 10px;
    margin-bottom: 20px;
}

.filter-content .title-head-col {
    position: relative;
    font-size: 20px;
    font-weight: 700;
    padding: 10px 0px;
    color: #000;
    padding: 5px 10px;
    background: #cd9b32;
    color: #fff;
    margin-bottom: 20px;
    border: 2px solid #e4a53d;
    border-radius: 5px;
}

.filter-content .title-head-col span {
    font-size: 14px;
    display: block;
    font-weight: 400;
}

.filter-content .title-head {
    position: relative;
    font-size: 18px;
    font-weight: 700;
    padding: 10px 0px;
    color: #000;
    padding: 5px 10px;
    background: #e4a53d;
    color: #fff;
}

.filter-content .aside-item .aside-content {
    width: 100%;
    position: relative;
    max-height: 200px;
    overflow-y: scroll;
    padding: 10px;
}

.filter-content .aside-item .aside-content ul {
    padding-left: 0px;
}

.filter-content .aside-item {
    margin-right: 0px;
    position: relative;
    float: left;
    width: 100%;
    margin-bottom: 20px;
    border: 1px solid #e4a53d;
    border-radius: 5px;
    overflow: hidden;
    background: #fff;
}

.filter-content .aside-item .aside-content input {
    width: 15px;
    height: 15px;
    position: relative;
    top: 2px;
    margin-right: 5px;
}

.nav-link li a:hover {
    color: #e4a53d;
}

.header .nav-link:hover {
    /* Hover color for "Trang chủ" */
    color: #e4a53d;
    /* Text color on hover for better contrast */
}

#searchForm {
    position: absolute;
    top: 100%;
    /* Đặt form ngay dưới biểu tượng tìm kiếm */
    right: 0;
    /* Căn phải form */
    background-color: white;
    /* Đảm bảo form có nền trắng */
    border: 1px solid #ccc;
    padding: 10px;
    display: none;
    /* Ẩn form ban đầu */
    z-index: 10;
    /* Đảm bảo form hiển thị trên các phần tử khác */
}

#searchForm input[type="text"] {
    padding: 5px;
    margin-right: 5px;
    border: 1px solid #ccc;
}

#searchForm button {
    padding: 5px 10px;
    background-color: #cd9b32;
    color: white;
    border: none;
    cursor: pointer;
}

.popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
}

.popup-content {
    background: #fff;
    padding: 20px;
    width: 90%;
    max-width: 450px;
    border-radius: 10px;
    position: relative;
}

.btn-close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 20px;
    border: none;
    background: none;
    cursor: pointer;
}

.product-header {
    display: flex;
    gap: 12px;
    margin-bottom: 15px;
}

.main-image {
    width: 120px;
    border-radius: 10px;
}

.price-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.price {
    font-size: 18px;
    font-weight: bold;
}

.new-price {
    color: #d9534f;
}

.old-price {
    text-decoration: line-through;
    color: #aaa;
    margin-left: 10px;
}

.stock {
    font-size: 14px;
    color: #666;
    margin-top: 5px;
}

.option-group {
    margin-top: 15px;
}

.label {
    font-weight: 600;
    margin-bottom: 5px;
}

.option-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.variant-button {
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid #ccc;
    background: white;
    cursor: pointer;
    font-size: 14px;
    transition: 0.2s ease;
}

.variant-button.active {
    border-color: #cd9b32;
    background-color: #cd9b32;
    color: white;
}

.add-to-cart {
    width: 100%;
    background-color: #cd9b32;
    color: white;
    padding: 12px;
    border: none;
    border-radius: 6px;
    font-weight: bold;
    cursor: pointer;
}

.quantity-wrapper {
    display: flex;
    align-items: center;
    border: 1.5px solid #d5a84b;
    border-radius: 6px;
    padding: 3px;
    width: fit-content;
    background-color: white;
    gap: 4px;
    /* Giảm khoảng cách giữa nút và số */
}

.quantity-btn {
    background-color: #d5a84b;
    color: white;
    border: none;
    width: 36px;
    height: 36px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s;
}

.quantity-btn:hover {
    background-color: #c8992e;
}

.quantity-input {
    width: 40px;
    height: 36px;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
    background-color: transparent;
    color: #000;
    outline: none;
    border: none;
    pointer-events: none;
}

.product-name a {
    color: #000;
    /* màu mặc định */
    text-decoration: none;
    transition: color 0.3s;
}

.product-name a:hover {
    color: #d4a548;
    /* màu khi hover */
}

/* ========== CSS cho bộ lọc ========== */
.filter-container__selected-filter {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

.filter-container__selected-filter-header-title {
    font-weight: 600;
    color: #333;
    font-size: 16px;
}

.filter-container__clear-all {
    color: #dc3545;
    text-decoration: none;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    margin-top: 10px;
}

.filter-container__clear-all:hover {
    color: #c82333;
    text-decoration: underline;
}

.filter-container__selected-filter-list ul {
    list-style: none;
    padding: 0;
    margin: 10px 0 0 0;
}

.filter-container__selected-filter-list li {
    display: inline-block;
    background: #cd9b32;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    margin: 2px;
    font-size: 12px;
}

.no-products-message {
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.products-count {
    padding: 10px 0;
    border-bottom: 1px solid #dee2e6;
}

/* Cải thiện checkbox */
.filter-item input[type="checkbox"] {
    accent-color: #cd9b32;
}

.filter-item label {
    cursor: pointer;
    transition: color 0.2s ease;
}

.filter-item label:hover {
    color: #cd9b32;
}

/* Hiệu ứng loading */
.filter-loading {
    opacity: 0.6;
    pointer-events: none;
    transition: opacity 0.3s ease;
}

/* Cải thiện giao diện bộ lọc */
.filter-content {
    position: sticky;
    top: 20px;
}

.aside-item {
    transition: all 0.3s ease;
}

.aside-item:hover {
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Animation cho checkbox */
.filter-item input[type="checkbox"]:checked + i {
    animation: checkmark 0.2s ease-in-out;
}

@keyframes checkmark {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* Variant selection styles */
.option-group {
    margin-bottom: 20px;
}

.option-group .label {
    font-weight: 600;
    margin-bottom: 8px;
    color: #333;
    font-size: 14px;
}

.option-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.variant-button {
    padding: 8px 16px;
    border: 2px solid #e0e0e0;
    background: white;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 13px;
    min-width: 80px;
    text-align: center;
}

.variant-button:hover {
    border-color: #cd9b32;
    background: #fdf8ec;
    transform: translateY(-1px);
}

.variant-button.active {
    border-color: #cd9b32;
    background: #cd9b32;
    color: white;
    box-shadow: 0 2px 8px rgba(205, 155, 50, 0.3);
}

.variant-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background: #f5f5f5;
    border-color: #ddd;
}

/* Quantity controls */
.quantity-wrapper {
    display: flex;
    align-items: center;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    width: fit-content;
}

.quantity-btn {
    padding: 8px 12px;
    border: none;
    background: #f8f9fa;
    cursor: pointer;
    transition: background 0.3s ease;
    font-size: 16px;
    font-weight: bold;
}

.quantity-btn:hover {
    background: #e9ecef;
}

.quantity-btn:active {
    background: #dee2e6;
}

.quantity-input {
    width: 60px;
    text-align: center;
    border: none;
    padding: 8px;
    font-size: 14px;
    background: white;
}

.quantity-input:focus {
    outline: none;
    background: #f8f9fa;
}

/* Add to cart button */
.add-to-cart {
    background: #cd9b32;
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
}

.add-to-cart:hover:not(:disabled) {
    background: #b88a2a;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(205, 155, 50, 0.3);
}

.add-to-cart:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

/* Reset button */
.btn-outline-secondary {
    border-color: #6c757d;
    color: #6c757d;
    transition: all 0.3s ease;
}

.btn-outline-secondary:hover {
    background: #6c757d;
    border-color: #6c757d;
    color: white;
}

/* Selection status styles */
.selection-status .alert {
    padding: 12px 16px;
    border-radius: 8px;
    border: none;
    font-size: 13px;
}

.selection-status .alert-info {
    background: #e3f2fd;
    color: #0d47a1;
    border-left: 4px solid #2196f3;
}

.selection-status .alert-warning {
    background: #fff3e0;
    color: #e65100;
    border-left: 4px solid #ff9800;
}

.selection-status .badge {
    font-size: 11px;
    padding: 4px 8px;
    border-radius: 12px;
}

.selection-status .bg-primary {
    background: #2196f3 !important;
}

.selection-status .bg-success {
    background: #4caf50 !important;
}

.selection-status .bg-warning {
    background: #ff9800 !important;
    color: white !important;
}

.selection-status .bg-info {
    background: #00bcd4 !important;
    color: white !important;
}

/* Product grid layout fixes */
.row {
    --bs-gutter-x: 1.5rem;
    --bs-gutter-y: 0;
    display: flex;
    flex-wrap: wrap;
    margin-top: calc(-1* var(--bs-gutter-y));
    margin-right: calc(-.5* var(--bs-gutter-x));
    margin-left: calc(-.5* var(--bs-gutter-x));
    width: 100%;
}

/* Ensure proper column spacing and alignment */
.col-xl-3 {
    flex: 0 0 25%;
    max-width: 25%;
    padding-right: calc(var(--bs-gutter-x) * .5);
    padding-left: calc(var(--bs-gutter-x) * .5);
    margin-bottom: 2rem;
    box-sizing: border-box;
}

/* Force remove any problematic inline styles */
.col-xl-3[style*="margin-right"] {
    margin-right: 0 !important;
}

.col-xl-3[style*="margin-left"] {
    margin-left: 0 !important;
}

/* Product card styling */
.prod1 {
    height: 100%;
    display: flex;
    flex-direction: column;
    background: white;
    border-radius: 15px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    overflow: hidden;
    margin: 0;
}

.prod1:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

/* Hiển thị các nút giỏ hàng và tìm kiếm khi hover */
.prod1:hover .btnmuangay10,
.prod1:hover .btnmuangay11 {
    display: block !important;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

/* Hiệu ứng hover cho các nút */
.btnmuangay10:hover,
.btnmuangay11:hover {
    transform: translate(-50%, -50%) scale(1.1) !important;
    box-shadow: 0 4px 12px rgba(205, 155, 50, 0.4);
}

/* Đảm bảo container sản phẩm có position relative */
.prod1 {
    position: relative;
}

/* Đảm bảo các nút có thể click được và hiển thị đúng */
.btnmuangay10,
.btnmuangay11 {
    cursor: pointer;
    pointer-events: auto;
    z-index: 10;
}

/* Đảm bảo các nút hiển thị đúng vị trí */
.muangay10 {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
}

/* Ẩn các nút mặc định */
.muangay10 {
    display: none;
}

/* Đảm bảo các nút hiển thị đúng vị trí khi hover */
.prod1:hover .muangay10 {
    display: flex;
    animation: fadeInUp 0.3s ease;
}

/* Animation cho các nút */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Đảm bảo các nút hiển thị đúng vị trí và có thể click được */
.prod1:hover .btnmuangay10,
.prod1:hover .btnmuangay11 {
    display: block !important;
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    pointer-events: auto;
    z-index: 10;
    cursor: pointer;
    background-color: rgba(205, 155, 50, 0.9);
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;
}

/* Đảm bảo các nút hiển thị đúng vị trí */
.prod1:hover .btnmuangay10 {
    left: 35%;
}

.prod1:hover .btnmuangay11 {
    left: 60%;
}

/* Đảm bảo các nút hiển thị đúng vị trí */
.prod1:hover .btnmuangay10,
.prod1:hover .btnmuangay11 {
    opacity: 1;
}

/* Đảm bảo các nút hiển thị đúng vị trí */
.prod1:hover .btnmuangay10,
.prod1:hover .btnmuangay11 {
    display: block !important;
}





/* Ensure product image fills container properly */
.prod1img {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 250px;
    border-radius: 15px 15px 0 0;
    flex-shrink: 0;
}

.prod1img img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: inherit;
    transition: transform 0.3s ease;
    display: block;
}

/* Product content area */
.prod1 .product-name {
    padding: 15px 15px 10px;
    margin: 0;
    flex-grow: 1;
}

.prod1 .product-name a,
.prod1 .product-name .product-link {
    color: #333;
    text-decoration: none;
    font-size: 16px;
    line-height: 1.4;
    display: block;
    transition: color 0.3s ease;
    cursor: pointer;
}

.prod1 .product-name a:hover,
.prod1 .product-name .product-link:hover {
    color: #cd9b32;
    text-decoration: underline;
}

/* Đảm bảo link sản phẩm hoạt động tốt */
.product-link {
    color: #333 !important;
    text-decoration: none !important;
    transition: all 0.3s ease !important;
    display: block !important;
    width: 100% !important;
    height: 100% !important;
    cursor: pointer !important;
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
}

.product-link:hover {
    color: #cd9b32 !important;
    text-decoration: underline !important;
    transform: translateY(-1px) !important;
}

/* Đảm bảo link có thể click được */
.product-link:focus {
    outline: 2px solid #cd9b32 !important;
    outline-offset: 2px !important;
}

/* Đảm bảo link hoạt động trên tất cả các trình duyệt */
.product-link:active {
    transform: scale(0.98) !important;
}

.product-link:focus-visible {
    outline: 2px solid #cd9b32 !important;
    outline-offset: 2px !important;
}

/* Responsive cho link sản phẩm */
@media (max-width: 768px) {
    .product-link {
        font-size: 14px !important;
        padding: 8px 0 !important;
    }

    .prod1 .product-name {
        padding: 10px 10px 8px !important;
    }
}

/* Đảm bảo link hoạt động trên touch devices */
@media (hover: none) {
    .product-link:hover {
        color: #333 !important;
        text-decoration: none !important;
        transform: none !important;
    }

    .product-link:active {
        color: #cd9b32 !important;
        background-color: rgba(205, 155, 50, 0.1) !important;
        transform: scale(0.98) !important;
    }
}

/* Đảm bảo link hoạt động trên tất cả các trình duyệt */
@media (pointer: coarse) {
    .product-link {
        min-height: 44px !important;
        min-width: 44px !important;
    }
}

/* Đảm bảo link sản phẩm hoạt động tốt trên mọi thiết bị */
.product-name {
    position: relative !important;
    z-index: 10 !important;
}

.product-link {
    position: relative !important;
    z-index: 11 !important;
}

/* Price section */
.prod1 > p:last-child {
    padding: 0 15px 15px;
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    flex-shrink: 0;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
    .col-xl-3 {
        flex: 0 0 33.333333%;
        max-width: 33.333333%;
    }
}

@media (max-width: 768px) {
    .col-xl-3 {
        flex: 0 0 50%;
        max-width: 50%;
    }
}

@media (max-width: 576px) {
    .col-xl-3 {
        flex: 0 0 100%;
        max-width: 100%;
    }
}

/* Container fixes */
.container-fluid {
    max-width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    overflow: hidden;
}

/* Ensure sidebar and main content work together */
.sidebar {
    flex: 0 0 25%;
    max-width: 25%;
}

/* Main product grid area */
.row:has(.col-xl-3) {
    flex: 1;
    margin-left: 0;
    margin-right: 0;
    width: 100%;
    overflow: visible;
}

/* Force 4-column layout on large screens */
@media (min-width: 1200px) {
    .col-xl-3 {
        flex: 0 0 25% !important;
        max-width: 25% !important;
    }

    /* Ensure last column is fully visible */
    .row .col-xl-3:last-child {
        margin-right: 0;
        padding-right: 0;
    }
}

/* Fix for the main container to prevent cutoff */
.section2 .container-fluid {
    max-width: 100%;
    padding-right: 30px;
    padding-left: 30px;
    margin-right: 0;
    margin-left: 0;
}

/* Ensure the row doesn't overflow */
.section2 .row {
    margin-right: 0;
    margin-left: 0;
    width: 100%;
    max-width: 100%;
}

/* Sidebar and main content layout */
.section2 .sidebar {
    flex: 0 0 25%;
    max-width: 25%;
    padding-right: 15px;
}

.section2 .row > .col-xl-3 {
    padding-left: 15px;
    padding-right: 15px;
}

/* Ensure last product is fully visible */
.section2 .row .col-xl-3:last-child {
    padding-right: 0;
}

/* Responsive adjustments for section2 */
@media (max-width: 1200px) {
    .section2 .container-fluid {
        padding-right: 20px;
        padding-left: 20px;
    }
}

@media (max-width: 768px) {
    .section2 .container-fluid {
        padding-right: 15px;
        padding-left: 15px;
    }
}

/* Final fixes to prevent product cutoff */
.section2 {
    overflow: visible;
    width: 100%;
}

.section2 .container-fluid {
    overflow: visible;
    width: 100%;
}

/* Ensure product cards don't get cut off */
.prod1 {
    overflow: visible;
    position: relative;
}

/* Fix for any remaining margin issues */
.col-xl-3:last-child .prod1 {
    margin-right: 0;
}

/* Ensure the entire row is visible */
.section2 .row:has(.col-xl-3) {
    overflow: visible;
    width: 100%;
    max-width: 100%;
}

/* CSS cho thông báo không có biến thể khả dụng */
.text-muted.small {
    color: #6c757d !important;
    font-size: 0.875em;
    font-style: italic;
    padding: 8px 12px;
    background-color: #f8f9fa;
    border: 1px solid #e9ecef;
    border-radius: 6px;
    margin-top: 8px;
    text-align: center;
    width: 100%;
}

/* CSS cho option group */
.option-group {
    transition: all 0.3s ease;
}

.option-group:hover {
    transform: translateY(-2px);
}

/* CSS cho variant button */
.variant-button {
    transition: all 0.3s ease;
    border-width: 2px;
}

.variant-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.variant-button.active {
    background-color: #d4a548 !important;
    border-color: #d4a548 !important;
    color: white !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(212, 165, 72, 0.3);
}

/* CSS cho button bị mờ (không khả dụng) */
.variant-button.disabled {
    background-color: #f8f9fa !important;
    border-color: #dee2e6 !important;
    color: #6c757d !important;
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
}

.variant-button.disabled:hover {
    background-color: #f8f9fa !important;
    border-color: #dee2e6 !important;
    color: #6c757d !important;
    transform: none;
    box-shadow: none;
    opacity: 0.6;
}
</style>
